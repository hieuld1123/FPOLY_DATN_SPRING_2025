<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11">
    </script>
</head>

<body class="hold-transition sidebar-mini" style="font-family: 'Bahnschrift'">
<!--N·ªôi dung -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-12">
                    <h1>
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                             class="bi bi-bookmark-dash-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5M6 6a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"/>
                        </svg>
                        S·ª¨A NH√ÇN VI√äN
                    </h1>

                </div>
            </div>
        </div><!-- /.container-fluid -->
    </section>
    <!---filter-->

    <br>
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <!-- /.card-header -->
                        <div class="card-body">
                            <section class="content">
                                <div class="container">
                                    <form th:method="post" id="addForm" th:object="${nhanVien}"
                                          th:action="@{/nhan-vien/sua/{id}(id=${nhanVien.id})}"
                                          enctype="multipart/form-data"
                                          onsubmit="return validate(event);">

                                        <section class="content">
                                            <div class="row">
                                                <h1 class="text-center">·∫¢nh ƒë·∫°i di·ªán</h1>
                                                <p class="text-center text-danger fw-normal" id="errorAnh"></p>

                                                <!-- ·∫¢nh ƒë·∫°i di·ªán cƒÉn gi·ªØa -->
                                                <div class="text-center">
                                                    <img id="uploadedImage"
                                                         th:src="@{/uploads/{imageName}(imageName=${nhanVien.hinhAnh})}"
                                                         class="img-fluid rounded-circle mx-auto d-block"
                                                         style="width: 150px; height: 150px; object-fit: cover; display: none;">
                                                </div>
                                            </div>

                                            <!-- Upload button cƒÉn gi·ªØa -->
                                            <div class="d-flex justify-content-center mt-3">
                                                <div class="file-input-wrapper">
                                                    <input type="file" id="fileInput" class="file-input" name="anh"
                                                           accept="image/png, image/jpeg">
                                                </div>
                                            </div>
                                        </section>
                                        <br>

                                        <div class="d-flex">
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>T√™n
                                                        nh√¢n vi√™n:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input placeholder="T√™n nh√¢n vi√™n" id="inputTen" name="name"
                                                           th:field="*{tenNhanVien}" th:errorclass="is-invalid"
                                                           class="form-control">
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;" id="errorTen"></p>
                                                </div>
                                            </div>
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: #ffffff">* </span>Ng√†y
                                                        sinh:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input class="form-control" id="inputNgSinh"
                                                           type="date" th:field="*{ngaySinh}"
                                                           placeholder="dd/MM/yyyy" th:errorclass="is-invalid">
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;" id="errorNgSinh"></p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex">
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>CƒÉn
                                                        c∆∞·ªõc c√¥ng d√¢n:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input class="form-control" placeholder="CƒÉn c∆∞·ªõc c√¥ng d√¢n"
                                                           id="inputCCCD" name="citizenID" th:field="*{cccd}"
                                                           th:errorclass="is-invalid"
                                                           th:attr="data-original=${nhanVien.cccd}, data-id=${nhanVien.id}">
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;" id="errorCCCD"></p>
                                                </div>
                                            </div>
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>Gi·ªõi
                                                        t√≠nh:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input type="radio" value="true" id="radioGT" th:field="*{gioiTinh}"
                                                           style="margin-top: 10px">Nam
                                                    <input type="radio" value="false" th:field="*{gioiTinh}"
                                                           style="margin-left: 10px;margin-top: 10px">N·ªØ
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex">
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span
                                                            style="color: red">* </span>Email:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input class="form-control" id="inputEmail" placeholder="Email"
                                                           th:field="*{email}" th:errorclass="is-invalid"
                                                           th:attr="data-original=${nhanVien.email}, data-id=${nhanVien.email}">
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;"
                                                       id="errorEmail"></p>
                                                </div>
                                            </div>
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>S·ªë
                                                        ƒëi·ªán tho·∫°i:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input class="form-control" id="inputSdt"
                                                           placeholder="S·ªë ƒëi·ªán tho·∫°i" th:field="*{sdt}"
                                                           th:errorclass="is-invalid"
                                                           th:attr="data-original=${nhanVien.sdt}, data-id=${nhanVien.sdt}">
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;" id="errorSdt"></p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex">
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>T·ªânh/Th√†nh
                                                        ph·ªë:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <select class="form-control form-select form-select-sm mb-3"
                                                            id="city" th:field="*{tinh}" aria-label=".form-select-sm">
                                                        <option value="" selected>Ch·ªçn t·ªânh th√†nh</option>
                                                    </select>
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;" id="errorTinh"></p>
                                                </div>
                                            </div>
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>Qu·∫≠n/Huy·ªán:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <select class="form-control form-select form-select-sm mb-3"
                                                            id="district" th:field="*{quan}"
                                                            aria-label=".form-select-sm">
                                                        <option value="" selected>Ch·ªçn qu·∫≠n huy·ªán</option>
                                                    </select>
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;" id="errorQuan"></p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex">
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>X√£/Ph∆∞·ªùng:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <select class="form-control form-select form-select-sm"
                                                            id="ward" th:field="*{phuong}"
                                                            aria-label=".form-select-sm">
                                                        <option value="" selected>Ch·ªçn ph∆∞·ªùng x√£</option>
                                                    </select>
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;"
                                                       id="errorPhuong"></p>
                                                </div>
                                            </div>
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>ƒê·ªãa
                                                        ch·ªâ c·ª• th·ªÉ:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input class="form-control" th:field="*{diaChiCuThe}"
                                                           id="inputDuong" placeholder="T√™n ƒê∆∞·ªùng"
                                                           th:errorclass="is-invalid">
                                                </div>
                                                <div class="col-auto">
                                                    <p style="color: red; font-weight: initial;"
                                                       id="errorDuong"></p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex">
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"><span style="color: red">* </span>Vai
                                                        tr√≤:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <input type="radio" value="ADMIN" id="radioVaitro"
                                                           th:field="*{vaiTro}" style="margin-top: 10px"
                                                           checked>Qu·∫£n l√Ω
                                                    <input type="radio" value="EMPLOYEE"
                                                           th:field="*{vaiTro}"
                                                           style="margin-left: 10px;margin-top: 10px">Nh√¢n vi√™n
                                                </div>
                                            </div>
                                            <div class="align-items-center col-lg-6 col-md-6">
                                                <div class="col-auto">
                                                    <label class="col-form-label"> <span
                                                            style="color: red">* </span>Tr·∫°ng th√°i:</label>
                                                </div>
                                                <div class="col-auto">
                                                    <select class="form-control form-select form-select-sm"
                                                            th:field="*{trangThai}" aria-label=".form-select-sm">
                                                        <option value="true" selected>L√†m vi·ªác</option>
                                                        <option value="false">Ngh·ªâ l√†m</option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <button type="submit" class="btn"
                                                style="margin-top: 20px;background-color: rgb(249,72,42);color: white">
                                            L∆∞u
                                        </button>
                                        <a type="button" class="btn btn-dark"
                                           style="margin-top: 20px; margin-left: 945px"
                                           th:href="@{/nhan-vien/hien-thi}">Tho√°t
                                        </a>

                                    </form>
                                </div>
                            </section>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </section>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>

<script>
    var citis = document.getElementById("city");
    var districts = document.getElementById("district");
    var wards = document.getElementById("ward");
    var Parameter = {
        url: "https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",
        method: "GET",
        responseType: "application/json",
    };
    var promise = axios(Parameter);
    promise.then(function (result) {
        renderCity(result.data);
    });

    function renderCity(data) {
        for (const x of data) {
            var opt = document.createElement('option');
            opt.value = x.Name;
            opt.text = x.Name;
            opt.setAttribute('data-id', x.Id);
            citis.options.add(opt);
        }
        citis.onchange = function () {
            districts.length = 1;
            wards.length = 1;
            if (this.options[this.selectedIndex].dataset.id != "") {
                const result = data.filter(n => n.Id === this.options[this.selectedIndex].dataset.id);

                for (const k of result[0].Districts) {
                    var opt = document.createElement('option');
                    opt.value = k.Name;
                    opt.text = k.Name;
                    opt.setAttribute('data-id', k.Id);
                    districts.options.add(opt);
                }
            }
        };
        districts.onchange = function () {
            wards.length = 1;
            const dataCity = data.filter((n) => n.Id === citis.options[citis.selectedIndex].dataset.id);
            if (this.options[this.selectedIndex].dataset.id != "") {
                const dataWards = dataCity[0].Districts.filter(n => n.Id === this.options[this.selectedIndex].dataset.id)[0].Wards;

                for (const w of dataWards) {
                    var opt = document.createElement('option');
                    opt.value = w.Name;
                    opt.text = w.Name;
                    opt.setAttribute('data-id', w.Id);
                    wards.options.add(opt);
                }
            }
        };
    }
</script>

<script th:inline="javascript">
    var listNV = /*[[${listNV}]]*/ '[]';
    var listTK = /*[[${listTK}]]*/ '[]';
    console.log("D·ªØ li·ªáu nh√¢n vi√™n:", listNV);
    console.log("D·ªØ li·ªáu t√†i kho·∫£n:", listTK);
</script>

<!--check validate-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // ƒê·∫∑t gi√° tr·ªã radio button m·∫∑c ƒë·ªãnh
        document.getElementById("radioGT").checked = true;
        document.getElementById("radioVaitro").checked = true;

        var errorAnh = document.getElementById("errorAnh");
        var fileInput = document.getElementById('fileInput');
        var imgElement = document.getElementById('uploadedImage');

        fileInput.addEventListener('change', function (event) {
            var file = event.target.files[0];

            // üîπ Reset tr·∫°ng th√°i m·ªói l·∫ßn ch·ªçn ·∫£nh m·ªõi
            var isAnhValid = true;
            errorAnh.innerText = "";
            imgElement.style.display = 'none';


            if (file) {
                // ‚úÖ Ki·ªÉm tra k√≠ch th∆∞·ªõc t·ªáp (d∆∞·ªõi 1MB)
                const maxSize = 1024 * 1024; // 1MB
                if (file.size > maxSize) {
                    errorAnh.innerText = "·∫¢nh nh√¢n vi√™n kh√¥ng ƒë∆∞·ª£c qu√° 1MB!";
                    isAnhValid = false;
                }

                // ‚úÖ Ki·ªÉm tra ƒë·ªãnh d·∫°ng t·ªáp (ch·ªâ PNG ho·∫∑c JPG)
                const validFormats = ['image/png', 'image/jpeg'];
                if (!validFormats.includes(file.type)) {
                    errorAnh.innerText = "·∫¢nh nh√¢n vi√™n ch·ªâ nh·∫≠n ƒë·ªãnh d·∫°ng PNG v√† JPG!";
                    isAnhValid = false;
                }

                // ‚úÖ N·∫øu ·∫£nh h·ª£p l·ªá, hi·ªÉn th·ªã ngay l·∫≠p t·ª©c
                if (isAnhValid) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        imgElement.src = e.target.result;
                        imgElement.style.display = 'block'; // Hi·ªÉn th·ªã h√¨nh ·∫£nh
                    };
                    reader.readAsDataURL(file);
                }
            }
        });
    });


    function checkTrungCccd() {
        var cccdInput = document.getElementById('inputCCCD').value.trim();
        var originalCccd = document.getElementById('inputCCCD').getAttribute("data-original") || "";
        var currentId = document.getElementById('inputCCCD').getAttribute("data-id");
        console.log("CCCD nh·∫≠p v√†o:", cccdInput);
        console.log("CCCD ban ƒë·∫ßu:", originalCccd);
        console.log("ID hi·ªán t·∫°i:", currentId);

        if (cccdInput === originalCccd) {
            console.log("‚úÖ CCCD kh√¥ng thay ƒë·ªïi, h·ª£p l·ªá!");
            return true; // Kh√¥ng thay ƒë·ªïi th√¨ h·ª£p l·ªá ngay
        }

        return !listNV.some(nv => nv.cccd === cccdInput && nv.id !== currentId);
        console.log("K·∫øt qu·∫£ ki·ªÉm tra tr√πng CCCD:", isDuplicate ? "‚ùå Tr√πng" : "‚úÖ Kh√¥ng tr√πng");

    }

    function checkTrungSdt() {
        var sdtInput = document.getElementById('inputSdt').value.trim();
        var originalSdt = document.getElementById('inputSdt').getAttribute("data-original") || "";
        var currentId = document.getElementById('inputSdt').getAttribute("data-id");

        if (sdtInput === originalSdt) {
            return true;
        }

        return !listTK.some(tk => tk.sdt === sdtInput && tk.id !== currentId);
    }

    function checkTrungEmail() {
        var emailInput = document.getElementById('inputEmail').value.trim();
        var originalEmail = document.getElementById('inputEmail').getAttribute("data-original") || "";
        var currentId = document.getElementById('inputEmail').getAttribute("data-id");
        console.log("email nh·∫≠p v√†o:", emailInput);
        console.log("email ban ƒë·∫ßu:", originalEmail);
        console.log("email hi·ªán t·∫°i:", currentId);
        if (emailInput === originalEmail) {
            console.log("‚úÖ email kh√¥ng thay ƒë·ªïi, h·ª£p l·ªá!");
            return true;
        }

        return !listTK.some(tk => tk.email.toLowerCase() === emailInput && tk.id !== currentId);
        console.log("K·∫øt qu·∫£ ki·ªÉm tra tr√πng email:", isDuplicate ? "‚ùå Tr√πng" : "‚úÖ Kh√¥ng tr√πng");
    }

    function validate(event) {
        console.log("ID nh√¢n vi√™n hi·ªán t·∫°i:", document.getElementById('inputCCCD').getAttribute("data-id"));

        let isValid = true;

        // L·∫•y gi√° tr·ªã t·ª´ input
        let tenNhanVien = document.getElementById("inputTen").value.trim();
        let ngaySinh = document.getElementById("inputNgSinh").value;
        let cccd = document.getElementById("inputCCCD").value.trim();
        let email = document.getElementById("inputEmail").value.trim();
        let sdt = document.getElementById("inputSdt").value;
        let city = document.getElementById("city").value;
        let district = document.getElementById("district").value;
        let ward = document.getElementById("ward").value;
        let diaChiCuThe = document.getElementById("inputDuong").value.trim();
        let anh = document.getElementById("fileInput").value;

        // Ki·ªÉm tra t√™n nh√¢n vi√™n
        let nameRegex = /^[A-Za-z√Ä-·ªπ\s]{2,50}$/; //cho ph√©p ti·∫øng Vi·ªát, d·∫•u c√°ch, kh√¥ng c√≥ k√Ω t·ª± ƒë·∫∑c bi·ªát
        if (tenNhanVien === "") {
            document.getElementById("errorTen").innerText = "T√™n nh√¢n vi√™n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!";
            isValid = false;
        } else if (!nameRegex.test(tenNhanVien)) {
            document.getElementById("errorTen").innerText = "T√™n nh√¢n vi√™n ph·∫£i t·ª´ 2 ƒë·∫øn 50 k√Ω t·ª± v√† kh√¥ng ch·ª©a k√Ω t·ª± ƒë·∫∑c bi·ªát!";
            isValid = false;
        } else {
            document.getElementById("errorTen").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra ng√†y sinh
        let ns = new Date(ngaySinh);
        let today = new Date();
        let tuoi = today.getFullYear() - ns.getFullYear();
        if (ngaySinh === "") {
            document.getElementById("errorNgSinh").innerText = "Vui l√≤ng ch·ªçn ng√†y sinh!";
            isValid = false;
        }
        // Ki·ªÉm tra th√°ng v√† ng√†y ƒë·ªÉ ƒë·∫£m b·∫£o ƒë·ªß 18 tu·ªïi
        if (
            today.getMonth() < ns.getMonth() ||
            (today.getMonth() === ns.getMonth() && today.getDate() < ns.getDate())
        ) {
            tuoi--;
        } else if (tuoi < 18) {
            document.getElementById("errorNgSinh").innerText = "Nh√¢n vi√™n ph·∫£i ƒë·ªß 18 tu·ªïi!";
            return false;
        } else {
            document.getElementById("errorNgSinh").innerText = "";
        }

        // Ki·ªÉm tra CCCD
        let regexCCCD = /^[0-9]{12}$/; // CCCD g·ªìm 12 ch·ªØ s·ªë
        if (cccd === "") {
            document.getElementById("errorCCCD").innerText = "CCCD kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!";
            isValid = false;
        } else if (!regexCCCD.test(cccd)) {
            document.getElementById("errorCCCD").innerText = "CCCD ph·∫£i g·ªìm 12 ch·ªØ s·ªë!";
            isValid = false;
        } else if (!checkTrungCccd()) {
            document.getElementById("errorCCCD").innerText = "CCCD ƒë√£ t·ªìn t·∫°i!";
            isValid = false;
        } else {
            document.getElementById("errorCCCD").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra Email
        let regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email === "") {
            document.getElementById("errorEmail").innerText = "Email kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!";
            isValid = false;
        } else if (!regexEmail.test(email)) {
            document.getElementById("errorEmail").innerText = "Email kh√¥ng h·ª£p l·ªá!";
            isValid = false;
        } else if (!checkTrungEmail()) {
            document.getElementById("errorEmail").innerText = "Email ƒë√£ t·ªìn t·∫°i!";
            isValid = false;
        } else {
            document.getElementById("errorEmail").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra S·ªë ƒëi·ªán tho·∫°i
        let regexSdt = /^(0[35789])\d{8}$/;// S·ªë ƒëi·ªán tho·∫°i Vi·ªát Nam
        if (sdt === "") {
            document.getElementById("errorSdt").innerText = "S·ªë ƒëi·ªán tho·∫°i kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!";
            isValid = false;
        } else if (!regexSdt.test(sdt)) {
            document.getElementById("errorSdt").innerText = "S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá!";
            isValid = false;
        } else if (!checkTrungSdt()) {
            document.getElementById("errorSdt").innerText = "S·ªë ƒëi·ªán tho·∫°i ƒë√£ t·ªìn t·∫°i!";
            isValid = false;
        } else {
            document.getElementById("errorSdt").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra T·ªânh/Th√†nh ph·ªë
        if (city === "") {
            document.getElementById("errorTinh").innerText = "Vui l√≤ng ch·ªçn T·ªânh/Th√†nh ph·ªë!";
            isValid = false;
        } else {
            document.getElementById("errorTinh").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }


        // Ki·ªÉm tra Qu·∫≠n/Huy·ªán
        if (district === "") {
            document.getElementById("errorQuan").innerText = "Vui l√≤ng ch·ªçn Qu·∫≠n/Huy·ªán!";
            isValid = false;
        } else {
            document.getElementById("errorQuan").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra X√£/Ph∆∞·ªùng
        if (ward === "") {
            document.getElementById("errorPhuong").innerText = "Vui l√≤ng ch·ªçn X√£/Ph∆∞·ªùng!";
            isValid = false;
        } else {
            document.getElementById("errorPhuong").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra ƒë·ªãa ch·ªâ c·ª• th·ªÉ
        if (diaChiCuThe === "") {
            document.getElementById("errorDuong").innerText = "Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ c·ª• th·ªÉ!";
            isValid = false;
        } else {
            document.getElementById("errorDuong").innerText = ""; // X√≥a th√¥ng b√°o l·ªói n·∫øu h·ª£p l·ªá
        }

        // Ki·ªÉm tra ·∫£nh ƒë·∫°i di·ªán
        // if (anh === "") {
        //     document.getElementById("errorAnh").innerText = "Vui l√≤ng ch·ªçn ·∫£nh ƒë·∫°i di·ªán!";
        //     isValid = false;
        // }

        // N·∫øu c√≥ l·ªói, ngƒÉn form g·ª≠i ƒëi
        if (!isValid) {
            event.preventDefault();
            return false;
        } else {
            Swal.fire({
                title: 'B·∫°n c√≥ mu·ªën c·∫≠p nh·∫≠t kh√¥ng?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'C√≥',
                cancelButtonText: 'Kh√¥ng'
            }).then((result) => {
                if (result.isConfirmed) {
                    // N·∫øu ng∆∞·ªùi d√πng nh·∫•n C√≥, hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng v√† chuy·ªÉn h∆∞·ªõng sau m·ªôt kho·∫£ng th·ªùi gian
                    const Toast = Swal.mixin({
                        toast: true,
                        position: "top-end",
                        showConfirmButton: false,
                        timer: 3000,
                        timerProgressBar: true,
                        didOpen: (toast) => {
                            toast.onmouseenter = Swal.stopTimer;
                            toast.onmouseleave = Swal.resumeTimer;
                        }
                    });

                    setTimeout(function () {
                        document.getElementById("addForm").submit();
                    }, 500);
                }
            });
        }
        return false;
    }
</script>

</body>